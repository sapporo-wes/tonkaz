[0m[38;5;245mrunning 1 test from ./tests/jga_test.ts[0m
JGA Linux test ...
[0m[38;5;245m------- output -------[0m
Tonkaz 0.2.5

[32mChecking[39m Crate2 based on Crate1:

  Crate1: [36m/home/suecharo/git/github.com/sapporo-wes/tonkaz/tests/example_crate/jga_1st.json[39m
  Crate2: [36m/home/suecharo/git/github.com/sapporo-wes/tonkaz/tests/example_crate/jga_2nd.json[39m

.----------------------------------------------------------------------------------------------.
|                |                Crate1                |                Crate2                |
|----------------|--------------------------------------|--------------------------------------|
| WF Name        | [33mSapporo workflow run jga_1st        [39m | [33mSapporo workflow run jga_2nd        [39m |
| WF Type        | Common Workflow Language             | Common Workflow Language             |
| WF Type Ver    | 1.1                                  | 1.1                                  |
| Run State      | COMPLETE                             | COMPLETE                             |
| ExitCode       | 0                                    | 0                                    |
| Start Time     | 2022-09-10 13:33:40                  | 2022-09-10 20:40:42                  |
| End Time       | 2022-09-10 15:03:05                  | 2022-09-10 22:09:08                  |
| Duration       | 1h 29m 25s                           | 1h 28m 26s                           |
| # Attachments  | 23 files                             | 23 files                             |
| # Outputs      | 48 files (4 EDAM-assigned files)     | 48 files (4 EDAM-assigned files)     |
'----------------------------------------------------------------------------------------------'
  * EDAM extensions: .bam/.bb/.bed/.bw/.fa/.fasta/.fastq/.fastq.gz/.fq/.fq.gz/.gtf/.gff/.sam/.vcf/.vcf.gz/.wig

[32mComparing[39m workflow results...
Calculate the reproducibility level by comparing the EDAM-assigned output files of Crate1 and Crate2. (option `--all` to use all output files)

Reproducibility level is defined as follows:

  - [34mLevel3[39m ‚≠ê‚≠ê‚≠ê : Files are identical with the same checksum
  - [34mLevel2[39m ‚≠ê‚≠ê   : Files are different, but their features (file size, map rate, etc.) are similar (within threshold: 0.05)
  - [34mLevel1[39m ‚≠ê     : Files are different, and their features are different (beyond threshold)
  - [34mLevel0[39m        : File not found

  [34mLevel3[39m: "Fully Reproduced" <---> [34mLevel0[39m: "Not Reproduced"

=== [34mLevel3[39m ‚≠ê‚≠ê‚≠ê (Same Checksum, 0/4 files)

=== [34mLevel2[39m ‚≠ê‚≠ê (Similar Features, 4/4 files)

  - NA19023.autosome_PAR_ploidy_2.g.vcf.gz
    .--------------------------------------------------------------------.
    |                |        in Crate1        |        in Crate2        |
    |----------------|-------------------------|-------------------------|
    | File Size      | [33m33.59 KB (34397)       [39m | [33m33.59 KB (34398)       [39m |
    | Variant Count  | 1061                    | 1061                    |
    | SNPs Count     | 14                      | 14                      |
    | Indels Count   | 1                       | 1                       |
    '--------------------------------------------------------------------'

  - NA19023.chrX_nonPAR_ploidy_1.g.vcf.gz
    .--------------------------------------------------------------------.
    |                |        in Crate1        |        in Crate2        |
    |----------------|-------------------------|-------------------------|
    | File Size      | [33m23.84 KB (24408)       [39m | [33m23.84 KB (24409)       [39m |
    | Variant Count  | 2                       | 2                       |
    | SNPs Count     | 0                       | 0                       |
    | Indels Count   | 0                       | 0                       |
    '--------------------------------------------------------------------'

  - NA19023.chrX_nonPAR_ploidy_2.g.vcf.gz
    .--------------------------------------------------------------------.
    |                |        in Crate1        |        in Crate2        |
    |----------------|-------------------------|-------------------------|
    | File Size      | [33m24.03 KB (24602)       [39m | [33m24.02 KB (24601)       [39m |
    | Variant Count  | 2                       | 2                       |
    | SNPs Count     | 0                       | 0                       |
    | Indels Count   | 0                       | 0                       |
    '--------------------------------------------------------------------'

  - NA19023.chrY_nonPAR_ploidy_1.g.vcf.gz
    .--------------------------------------------------------------------.
    |                |        in Crate1        |        in Crate2        |
    |----------------|-------------------------|-------------------------|
    | File Size      | [33m24.35 KB (24931)       [39m | [33m24.35 KB (24935)       [39m |
    | Variant Count  | 42                      | 42                      |
    | SNPs Count     | 4                       | 4                       |
    | Indels Count   | 0                       | 0                       |
    '--------------------------------------------------------------------'

=== [34mLevel1[39m ‚≠ê (Different Features, 0/4 files)

=== [34mLevel0[39m (Not Found, Crate1: 0 files, Crate2: 0 files)

[32mSummarize[39m compare result:

  .---------------------------------------------------------------------------.
  |      Reproducibility      |   Level   |     Definition      |   File #    |
  |---------------------------|-----------|---------------------|-------------|
  | Fully Reproduced          | ‚≠ê‚≠ê‚≠ê    | Same Checksum       | 0 files     |
  | Acceptable Differences    | ‚≠ê‚≠ê      | Similar Features    | 4 files     |
  | Unacceptable Differences  | ‚≠ê        | Different Features  | 0 files     |
  | Not Reproduced            |           | Not Found           | 0 files     |
  '---------------------------------------------------------------------------'

[32mComparing[39m multiqc stats...
Crates contain MultiQC stats, which we will be comparing. MultiQC stats are aggregated on a sample level.

  - Bcftools_stats Number_of_MNPs
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023.autosome_PAR_ploidy_2.g | 0            | 0            | ‚≠ê‚≠ê      |
    | NA19023.chrX_nonPAR_ploidy_1.g  | 0            | 0            | ‚≠ê‚≠ê      |
    | NA19023.chrX_nonPAR_ploidy_2.g  | 0            | 0            | ‚≠ê‚≠ê      |
    | NA19023.chrY_nonPAR_ploidy_1.g  | 0            | 0            | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Bcftools_stats Number_of_SNPs
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023.autosome_PAR_ploidy_2.g | 14           | 14           | ‚≠ê‚≠ê      |
    | NA19023.chrX_nonPAR_ploidy_1.g  | 0            | 0            | ‚≠ê‚≠ê      |
    | NA19023.chrX_nonPAR_ploidy_2.g  | 0            | 0            | ‚≠ê‚≠ê      |
    | NA19023.chrY_nonPAR_ploidy_1.g  | 4            | 4            | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Bcftools_stats Number_of_indels
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023.autosome_PAR_ploidy_2.g | 1            | 1            | ‚≠ê‚≠ê      |
    | NA19023.chrX_nonPAR_ploidy_1.g  | 0            | 0            | ‚≠ê‚≠ê      |
    | NA19023.chrX_nonPAR_ploidy_2.g  | 0            | 0            | ‚≠ê‚≠ê      |
    | NA19023.chrY_nonPAR_ploidy_1.g  | 0            | 0            | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Bcftools_stats Number_of_records
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023.autosome_PAR_ploidy_2.g | 1061         | 1061         | ‚≠ê‚≠ê      |
    | NA19023.chrX_nonPAR_ploidy_1.g  | 2            | 2            | ‚≠ê‚≠ê      |
    | NA19023.chrX_nonPAR_ploidy_2.g  | 2            | 2            | ‚≠ê‚≠ê      |
    | NA19023.chrY_nonPAR_ploidy_1.g  | 42           | 42           | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Bcftools_stats Tstv
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023.autosome_PAR_ploidy_2.g | 2.5          | 2.5          | ‚≠ê‚≠ê      |
    | NA19023.chrX_nonPAR_ploidy_1.g  | 0            | 0            | ‚≠ê‚≠ê      |
    | NA19023.chrX_nonPAR_ploidy_2.g  | 0            | 0            | ‚≠ê‚≠ê      |
    | NA19023.chrY_nonPAR_ploidy_1.g  | 1            | 1            | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Picard_mark_duplicates PERCENT_DUPLICATION
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | ERR1347662                      | 0.000966     | 0.000966     | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Picard_wgsmetrics MEAN_COVERAGE
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023                         | 0            | 0            | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Picard_wgsmetrics MEDIAN_COVERAGE
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023                         | 0            | 0            | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Picard_wgsmetrics PCT_30X
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023                         | 0            | 0            | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Picard_wgsmetrics SD_COVERAGE
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023                         | 0            | 0            | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Samtools Flagstat_total
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023                         | 21866        | 21866        | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Samtools Mapped_passed
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023                         | 21838        | 21838        | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

  - Samtools Mapped_passed_pct
    .---------------------------------------------------------------------------.
    |             Sample              |  in Crate1   |  in Crate2   |   Level   |
    |---------------------------------|--------------|--------------|-----------|
    | NA19023                         | 99.87        | 99.87        | ‚≠ê‚≠ê      |
    '---------------------------------------------------------------------------'

[0m[38;5;245m----- output end -----[0m
JGA Linux test ... [0m[32mok[0m [0m[38;5;245m(9ms)[0m

[0m[32mok[0m | 1 passed | 0 failed [0m[38;5;245m(10ms)[0m

